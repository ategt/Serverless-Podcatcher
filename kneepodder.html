<!DOCTYPE html>
<html>
<head>
	<title>Serverless Podcatcher</title>
</head>
<body>
	<div id="app">
		<div v-for="(podcast, index) in podcastFeedsList"
  					v-bind:index="index"
  					v-bind:key="podcast.id">
  					<podcast v-bind:channel="podcast"></podcast>
		</div>
	</div>
	<script type="text/javascript" src="./vue.js"></script>
	<script type="text/javascript" src="./podcatcher.js"></script>
	<script type="text/javascript" src="./parse-xml.min.js"></script>
	<script type="text/javascript" src="./test-xhr-response.js"></script>
	<script type="text/javascript">
		Vue.component('podcast', {
		  props: ['channel'],
		  template: '<div class=\"feed-panel\">\
						<div class=\"title\">{{ channel.title }}</div>\
			   			<div class=\"description\">{{channel.description}}</div>\
					    <div class=\"feed-image\">\
							<img v-bind:src=\"channel.image.url\" \>\
						</div>\
						<div class=\"media-panel\">\
						</div>\
					</div>'
							//{{ //channel.media.slice(0, 5).map((item) => itemMap(item)).join("") }} \
		})
		Vue.component('podcast-feed-channel', {
		  props: ['channel'],
		  template: '<li>{{ channel.text }}</li>'
		})
		Vue.component('podcast-feed-item', {
		  props: ['item'],
		  template: '<li>{{ item.text }}</li>'
		})

		let feeds = processRSS(parseXml(getMockResponse()).children[0])
		feeds = assignIds([feeds[0],feeds[0],feeds[0],feeds[0],feeds[0],feeds[0]])

		feeds = feeds.map((feed) => Object.assign({}, feed, {image: Object.assign({}, feed.image, {url: `http://127.0.0.1:5000/send/${feed.id}.img`})}))

		const vm = new Vue({
		  el: '#app',		  
		  data: {
		    podcastFeedsList: feeds
		  }
		})
	</script>
</body>
</html>